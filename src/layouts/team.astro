---
import BlurImageHeader from "@components/composite/header/BlurImageHeader.astro";
import Base from "@layouts/base/index.astro";
import H1Section from "@components/composite/section/H1.astro";
import Typography from "@components/display/Typography.astro";
import FacultyCard from "@components/pages/teams/FacultyCard.astro";
import Grid from "@components/layout/Grid.astro";
import VSpace from "@components/layout/VSpace.astro";
import StudentCard from "@components/pages/teams/StudentCard.astro";
import RecentWorks from "@components/pages/teams/RecentWorks.astro";
import type { Member } from "@content";

export type Members = {
  maxW: string;
  members: Member[];
};

export type Cover = {
  src: ImageMetadata;
  alt: string;
};

interface Props {
  name: string;
  cover: Cover;
  students: Members;
  faculties: Members;
  recentWorks?: {id: string}[];
}
const { name, cover, students, faculties, recentWorks } = Astro.props;
---

<Base>
  <BlurImageHeader imgAlt={cover.alt} imgSrc={cover.src}>
    {name}
  </BlurImageHeader>
  <slot />
  <H1Section headingText="メンバー" backgroundInverted={true} fullW={true}>
    <Grid minW={faculties.maxW}>
      {
        faculties.members.map((faculty) => (
          <FacultyCard member={faculty}>
            <Typography>{faculty.message}</Typography>
          </FacultyCard>
        ))
      }
    </Grid>
    <VSpace h="2rem" />
    <Grid minW={students.maxW}>
      {
        students.members.map((student) => (
          <StudentCard member={student}>
            <Typography>{student.message}</Typography>
          </StudentCard>
        ))
      }
    </Grid>
  </H1Section>
  {
    recentWorks && recentWorks.length > 0 ? (
      <H1Section headingText="近年の研究成果" backgroundInverted={false}>
        <RecentWorks works={recentWorks} />
      </H1Section>
    ) : null
  }
</Base>

<style>
  .img-triming {
    position: relative;
    width: 100%;
    min-width: 100%;
    overflow-y: hidden;
    height: 12rem;
    max-height: 12rem;
  }

  .header-img {
    width: 100%;
    min-width: 100%;
    height: auto;
  }

  .heading-text {
    backdrop-filter: blur(2px);
    width: 100%;
    position: absolute;
    bottom: 0;
  }
</style>
